<html lang= "en">
  <head>
    <meta charset= "UTF-8">
    <meta name= "viewport" content = "width=device-width, initial-scale=1.0">
    <title> Search for a Small Buisness </title>
    <style>
      body {text-align: center;}
      input{ width: 300px; padding: 10px; font-size:16px;}
    </style>
    <link rel="stylesheet" href="/src/style.css" />
  </head>
  
  <body>
    <h2>Social Feed</h2>
    <a href="feed.html">
      <img src="/src/assets/redBox.png" alt="Red Box">
    </a>

    <h2> HelpðŸ’ž </h2>
    <input type="text" id="search" placeholder = " ðŸ” Search Local Chicago, IL 60608">
    <h3> Best Small Buisnesses near Chicago, IL 60608 </h3>

  <!----This is where data is imported-->
  <ul id="business-list"></ul> <!-- Dynamic List of Businesses -->
    <p id=""no-rsults" style=" "display: none; color:red;">Try Searching a Different Name</p>"
    <script>
        async function fetchBusinesses() {
            try {
                const response = await fetch("http://localhost:5000/yelp");
                const businesses = await response.json();

                const businessList = document.getElementById("business-list");
                businessList.innerHTML = ""; 
               businesses.forEach(business=> {
                let listItem = document.createElement("li");
                let link = document.createElement("a");
                link.href = '${business.uil}';
                link.textContent = business.name;
                listItem.appendChild(link);
                businessList.appendChild(listItem);
               });
            } catch (error) {
                console.error("Error fetching data:", error);
            }
        }

        // Fetch businesses when the page loads
        fetchBusinesses();

    document.getElementById("search").addEventListener("input", function (){
    let filter = this.value.toLowerCase();
    let items = document.querySelectorAll("#buisness-list li");
        items.forEach((item)=>{
          let text = item.textContent.toLowerCase();
          item.style.display = text.includes(filter) ? "block" : "none";
        });
      });
  
    </script>
    
  </body>
  </html>